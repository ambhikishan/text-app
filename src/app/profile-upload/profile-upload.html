<app-navbar *ngIf="username != 'Loading...'" [username]="username" [photoUrl]="updatedPicture"></app-navbar>

<div class="profile-container">
  <h2>Profile Settings</h2>

  <div class="profile-container">
  <h2>Update Profile Photo</h2>

  <div class="image-wrapper">
    <img [src]="imagePreview" alt="Profile Preview" class="profile-img">
    
    <input 
      type="file" 
      id="fileInput" 
      (change)="onFileSelected($event)" 
      accept="image/*" 
      hidden
      
    >
    
    <label for="fileInput" class="edit-overlay">
      <span>ðŸ“· Change</span>
    </label>
  </div>

  <button 
    class="upload-btn" 
    (click)="onUpload()" 
    [disabled]="!selectedFile || isUploading">
    {{ isUploading ? 'Uploading...' : 'Upload' }}
  </button>
</div>
  <hr class="divider">

  <div class="user-details">
    <h3 class="username">{{ username }}</h3>
    <p class="email">{{ email }}</p>
  </div>

  <hr class="divider">

  <div class="password-section">
    <button class="toggle-password-btn" (click)="showPasswordForm = !showPasswordForm">
      {{ showPasswordForm ? 'Cancel' : 'Change Password' }}
    </button>

    <div class="password-form" *ngIf="showPasswordForm">
      <div class="form-group">
        <label>New Password</label>
        <input type="password" [(ngModel)]="newPassword" placeholder="Enter new password" [value]="newPassword">
      </div>

      <div class="form-group">
        <label>Confirm Password</label>
        <input type="password" [(ngModel)]="confirmPassword" placeholder="Confirm new password" [value]="confirmPassword">
      </div>

      <button 
        class="save-pass-btn" 
        (click)="onChangePassword()"
        [disabled]="!newPassword || !confirmPassword">
        Update Password
      </button>
    </div>
  </div>

</div>